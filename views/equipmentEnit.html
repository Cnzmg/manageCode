<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <meta name="format-detection" content="telephone=no">
        <meta charset="UTF-8">

        <meta name="description" content="Violate Responsive Admin Template">
        <meta name="keywords" content="Super Admin, Admin, Template, Bootstrap">

        <title>广东圆梦实业发展有限公司</title>

        <!-- CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/animate.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/form.css" rel="stylesheet">
        <link href="css/calendar.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <link href="css/icons.css" rel="stylesheet">
        <link href="css/generics.css" rel="stylesheet">
        <link rel="icon" href="img/bitbug_favicon.ico" type="image/x-icon" />
        <script type="text/javascript" src="js/config/config.js"></script>
        <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=YrLXSmMEX8PpItoywaoeuXigcfKNuzoy"></script>
        <script type="text/javascript" src="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js"></script>

    </head>
    <body id="skin-cloth">

        <header id="header" class="media">
            <a href="" id="menu-toggle"></a>
            <a class="logo pull-left" href="index.html">咖啡蜗后台管理系统</a>

            <div class="media-body">
                <div class="media" id="top-menu">
                    <div id="time" class="pull-right">
                        <span id="hours"></span>
                        :
                        <span id="min"></span>
                        :
                        <span id="sec"></span>
                    </div>

                    <div class="media-body" style="line-height:39px;">
                        <!-- <input type="text" class="main-search"> -->
                        广东圆梦实业发展有限公司
                    </div>
                </div>
            </div>
        </header>

        <div class="clearfix"></div>

        <section id="main" class="p-relative" role="main">

            <!-- Sidebar -->
            <aside id="sidebar">

                <!-- Sidbar Widgets -->
                <div class="side-widgets overflow">
                    <!-- Profile Menu -->
                    <div class="text-center s-widget m-b-25 dropdown" id="profile-menu">
                        <a href="" data-toggle="dropdown">
                            <img class="profile-pic animated" src="img/1516775224.jpg" alt="">
                        </a>
                        <ul class="dropdown-menu profile-menu">
                        </ul>
                        <h4 class="m-0" id="usAdministration">Admin</h4>
                        <span id="Administration"></span>
                    </div>

                    <!-- Calendar -->
                    <div class="s-widget m-b-25">
                        <div id="sidebar-calendar"></div>
                    </div>

                </div>

                <!-- Side Menu -->
                <ul class="list-unstyled side-menu" id="J_menuatch">

                </ul>

            </aside>

            <!-- Content -->
            <section id="content" class="container">

                <!-- Table Striped -->
                <div class="block-area" id="tableStriped">
                    <h3 class="block-title" style="font-size:14px;">编辑设备</h3>
                    <form id="equEnitForm" method="post" role="form">
                        <div class="form-group" style="height:auto;overflow:hidden;">
                            <label class="col-sm-1 control-label" style="line-height:34px;text-align:right;">绑定商户</label>
                            <div class="col-sm-11">
                                <select disabled="disabled" id="adminId" value="1" style="width:80%;height:34px;background:none;border:1px solid rgba(255, 255, 255, 0.3);">
                                    <!-- <option value="1">请选择</option> -->
                                </select>
                                <input type="hidden" name="adminId" />
                            </div>
                        </div>

                        <div class="form-group"style="height:auto;overflow:hidden;">
                            <label class="col-sm-1 control-label" style="line-height:34px;text-align:right;">地址搜索</label>
                            <div class="col-sm-11" >
                               <!--  <style type="text/css">
                                    .city-picker-select select
                                    {
                                        border: 1px solid #ccc;
                                        background: none;
                                        border-radius: 5px;
                                        color: #fff;
                                        font-size: 12px;
                                        outline: none;
                                        width: 160px;
                                        height: 34px;
                                        margin-right: 10px;
                                    }
                                </style> -->
                                <input type="text" id="detailedAddress" placeholder="搜索地址" style="height:34px;width:20%;background:none;border:1px solid rgba(255, 255, 255, 0.3);"/>
                                <input type="button" value="搜索" id="btnclick" style="height:34px;width:10%;background:none;border:1px solid rgba(255, 255, 255, 0.3);" />

                                <input type="hidden" name="province" />
                                <input type="hidden" name="city" />
                                <input type="hidden" name="district" />
                            </div>
                        </div>
                        <div class="form-group" style="height:auto;overflow:hidden;">
                            <label class="col-sm-1 control-label" style="line-height:34px;text-align:right;">地址搜索</label>
                            <div class="col-sm-11" >
                                <input type="text" id="shoemap"placeholder="坐标值" style="height:34px;width:20%;background:none;border:1px solid rgba(255, 255, 255, 0.3);" />
                                <span class="block-title" style="font-size:12px;text-align:right;margin-right:10px;background:none;margin-top:10px;">详细地址</span>
                                <input type="text" id="machineAddrDesc" placeholder="精确到门牌号" style="height:34px;width:20%;background:none;border:1px solid rgba(255, 255, 255, 0.3);" />
                                <input type="hidden" name="machineAddrDesc"/>
                                <input type="hidden" id="typtip" />
                                <!-- <input type="button" value="当前坐标" style="background:none;border:1px solid #fff;"/> -->
                                <a class="block-title" style="font-size:12px;text-align:center;margin-left:30px;width:112px;" href="javascript:void(0)" onclick="jzm.manageMachineRootEnit()">保存</a>
                            </div>
                        </div>
                        <div class="form-group" >
                                <label class="col-sm-1 control-label" style="line-height:34px;text-align:right;">场景图片</label>
                                <div class="col-sm-8">
                                    <div class="col-sm-4">
                                        <img class="radio-inline" id="machineScenePicUrl_img" height="200px" src="">
                                        <span class="btn btn-primary pbtn" style="margin:20px;" onclick="jzm.updateFile({type:10,id:['#machineScenePicUrl_img','#machineScenePicUrl_file','#machineScenePicUrl'],format:'i'})">选择图片</span>
                                        <input type="file" class="form-control" accept="image/jpeg,image/png" id="machineScenePicUrl_file" name="machineScenePicUrl_file" style="display:none;" value="">
                                        <input type="hidden" class="form-control" id="machineScenePicUrl" name="machineScenePicUrl" style="display:none;" value="">
                                    </div>
                                </div>
                            </div>
                        <div class="col-sm-12" >
                            <div id="cityg" style="height:500px;width:100%;margin-top:10px;"></div>
                        </div>
                        <div id="r-result"></div>
                        <input type="hidden" id="machineLongitude" name="machineLongitude" />
                        <input type="hidden" id="machineLatitude" name="machineLatitude" />
                    </form>
                </div>
            </section>
            <br/><br/>

        </section>

        <!-- Javascript Libraries -->
        <!-- jQuery -->
        <script src="js/jquery.min.js"></script> <!-- jQuery Library -->

        <!-- Bootstrap -->
        <script src="js/bootstrap.min.js"></script>

        <!-- UX -->
        <script src="js/scroll.min.js"></script> <!-- Custom Scrollbar -->

        <!-- Other -->
        <script src="js/calendar.min.js"></script> <!-- Calendar -->

        <script type="text/javascript" src="js/config/genre.js"></script><!-- show user list -->

        <!-- All JS functions -->
        <script src="js/functions.js"></script>
        <!-- allr lbs -->
        <script type="text/javascript" src="js/config/lbs_base.js?v=123"></script>
        <script type="text/javascript">
            jzm.searchequEnit();
            var ac = $("#shoemap").val();
            // 百度地图API功能
            	var map = new BMap.Map("cityg");
	            var point = new BMap.Point(ac.split(',')[0],ac.split(',')[1]);
	            map.centerAndZoom(point,12);
	            map.enableScrollWheelZoom(true);
	            map.addOverlay(new BMap.Marker(new BMap.Point(ac.split(',')[0],ac.split(',')[1])));
	            var geoc = new BMap.Geocoder();
	            map.addControl(new BMap.NavigationControl()); //添加默认缩放平移控件
	            map.addEventListener("click", function(e){
	                //通过点击百度地图，可以获取到对应的point, 由point的lng、lat属性就可以获取对应的经度纬度
	                var pt = e.point;
	                geoc.getLocation(pt, function(rs){
	                    //addressComponents对象可以获取到详细的地址信息
	                    var addComp = rs.addressComponents;
	                    var site = addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber;
	                    //将对应的HTML元素设置值
	                    // console.log(site);
	                    $("#shoemap").val(pt.lng + ", " + pt.lat);
	                    $("#detailedAddress").val(site);
	
	                    $("input[name='province']").val(addComp.province);
	                    $("input[name='city']").val(addComp.city);
	                    $("input[name='district']").val(addComp.district);
	
	                    $("#machineAddrDesc").val("");
	                    $("input[name='machineAddrDesc']").val("");
	                    $("#typtip").val(6);
	
	                });
	            });
	            $("#btnclick").click(function(event) {
	                var localshow = new BMap.LocalSearch(map, {  //本地检索
	                        renderOptions:{map: map}
	                    });
	                localshow.search($("#detailedAddress").val());
	                map.clearOverlays();  //清除原来的标点
	                 var options = {
	                    onSearchComplete: function(results){
	                        // 判断状态是否正确
	                        console.log(results);
	                        if (local.getStatus() == BMAP_STATUS_SUCCESS){
	                            var s = [];
	                            for (var i = 0; i < results.getCurrentNumPois(); i ++){
	                                s.push(results.getPoi(i).title + ", " + results.getPoi(i).address);
	                                $("#shoemap").val(results.getPoi(0).point.lng + ", " + results.getPoi(0).point.lat);
	                            }
	                        }
	                    }
	                };
	
	                var local = new BMap.LocalSearch(map, options);
	                local.search($("#detailedAddress").val());
	
	                $("input[name='machineAddrDesc']").val("");
	                $("#machineAddrDesc").val("");
	                $("#typtip").val(6);
	            });
        </script>
    </body>
</html>
